<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ACA认证课程-负载均衡SLB与云上安全</title>
      <link href="/article/c5d48127.html"/>
      <url>/article/c5d48127.html</url>
      
        <content type="html"><![CDATA[<h3 id="一、阿里云负载均衡"><a href="#一、阿里云负载均衡" class="headerlink" title="一、阿里云负载均衡"></a>一、阿里云负载均衡</h3><p>负载均衡采用集群部署，可实现会话同步，以消除服务器单点故障，提升冗余，保证服务的稳定性。</p><p>阿里云当前提供四层（TCP协议和UDP协议）和七层（HTTP和HTTPS协议）的负载均衡服务。</p><ul><li>四层采用开源软件LVS（Linux Virtual Server）+ keepalived的方式实现负载均衡，并根据云计算需求对其进行了个性化定制。</li><li>七层采用Tengine实现负载均衡。Tengine是由淘宝网发起的Web服务器项目，它在Nginx的基础上，针对有大访问量的网站需求，添加了很多高级功能和特性。</li></ul><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p><strong>负载均衡（Server Load Balancer）</strong>是将访问流量根据转发策略分发到后端多台云服务器（ECS实例）的流量分发控制服务。负载均衡扩展了应用的服务能力，增强了应用的可用性。</p><p>负载均衡通过设置<strong>虚拟服务地址</strong>，将添加的ECS实例虚拟成一个高性能、高可用的应用服务池，并根据转发规则，将来自客户端的请求分发给云服务器池中的ECS实例。</p><p>负载均衡默认检查云服务器池中ECS实例的健康状态，自动隔离异常状态的ECS实例，消除了单台ECS实例的单点故障，提高了应用的整体服务能力。此外，负载均衡还具备抗DDoS攻击的能力，增强了应用服务的防护能力。</p><h4 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h4><p>负载均衡服务主要有三个核心概念：</p><p>负载均衡实例 （Server Load Balancer instances）</p><p>一个负载均衡实例是一个运行的负载均衡服务，用来接收流量并将其分配给后端服务器。要使用负载均衡服务，您必须创建一个负载均衡实例，并至少添加一个监听和两台ECS实例。</p><p>监听 （Listeners）</p><p>监听用来检查客户端请求并将请求转发给后端服务器。监听也会对后端服务器进行健康检查。</p><p>后端服务器（Backend Servers）</p><p>一组接收前端请求的ECS实例。您可以单独添加ECS实例到服务器池，也可以通过虚拟服务器组或主备服务器组来批量添加和管理。</p><p><img src= "/img/loading.gif" data-lazy-src="https://edu.aliyun.com/lab/files/courses/11bc5c2e31a3429082a2b012fe08034d/sections/8c47d7f310214b3184714b66c75b88d2/content/images/course-11bc5c2e31a3429082a2b012fe08034d-section-8c47d7f310214b3184714b66c75b88d2-content-image-1482739463577-BaRBx3" alt="img"></p><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><p>1）负载均衡服务通过设置虚拟服务地址（IP），将位于同一地域（Region）的多台云服务器（Elastic Compute Service，简称ECS）资源虚拟成一个高性能、高可用的应用服务池；根据应用指定的方式，将来自客户端的网络请求分发到云服务器池中。</p><p>2）负载均衡服务会检查云服务器池中ECS的健康状态，自动隔离异常状态的ECS，从而解决了单台ECS的单点问题，同时提高了应用的整体服务能力。在标准的负载均衡功能之外，负载均衡服务还具备TCP与HTTP抗DDoS攻击的特性，增强了应用服务器的防护能力。</p><p>3）负载均衡服务是ECS面向多机方案的一个配套服务，需要同ECS结合使用。</p><h4 id="产品优势"><a href="#产品优势" class="headerlink" title="产品优势"></a>产品优势</h4><ul><li><p>高可用</p><p>采用全冗余设计，无单点，支持同城容灾。搭配DNS可实现跨地域容灾，可用性高达99.95%。</p><p>根据应用负载进行弹性扩容，在流量波动情况下不中断对外服务。</p></li><li><p>可扩展</p><p>您可以根据业务的需要，随时增加或减少后端服务器的数量，扩展应用的服务能力。</p></li><li><p>低成本</p><p>与传统硬件负载均衡系统高投入相比，成本可下降60%。</p></li><li><p>安全</p><p>结合云盾，可提供5Gbps的防DDOS攻击能力。</p></li></ul><h3 id="二、云上安全防护"><a href="#二、云上安全防护" class="headerlink" title="二、云上安全防护"></a>二、云上安全防护</h3><ol><li>互联网常见威胁</li></ol><ul><li><p>DDoS攻击，大流量攻击</p></li><li><p>口令暴力破解，以SSH，RDP协议为主1每周数百万次攻击</p></li><li><p>Web应用攻击，以SQL注入攻击为主</p></li></ul><blockquote><p>DDoS（Distributed Denial of Service）即分布式拒绝服务攻击。攻击主要目的是让指定目标无法提供正常服务，是最强大、最难防御的攻击之一。近年出现的DRDos（分布式反射攻击）让DDoS攻击水平迅速提升，互联网安全被网络暴力所威胁。</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625193538211.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tpbmdfcHJvamVjdA==,size_16,color_FFFFFF,t_70"></p><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020062519355078.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tpbmdfcHJvamVjdA==,size_16,color_FFFFFF,t_70"></p><p>2.应用防火墙和安骑士</p><p><strong>1) Web应用防火墙（Web Application Firewall，简称WAF)</strong></p><p>阿里云云盾Web应用防火墙：基于云安全大数据能力实现运营+数据+攻防体系、综合打造网站应用安全</p><p>通过防御SQL注入、XSS跨站脚本、常见Web服务器插件漏洞、木马上传、非授权核心资源访问等OWASP常见攻击；过滤海量恶意CC攻击；禁止恶意的接口滥刷，数据爬取；</p><p>避免网站资产数据泄露，保障网站的安全与可用性。</p><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625193622295.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tpbmdfcHJvamVjdA==,size_16,color_FFFFFF,t_70"></p><p><strong>2) 阿里云云盾-安骑士</strong></p><p>是云盾安全防护体系中的主机安全防护模块，基于云端联动防御，可以为云服务器提供防黑客入侵的服务主要防护功能：</p><ul><li>木马查杀</li><li>防密码暴力破解</li><li>异地登录提醒</li><li>漏洞检测修复</li></ul><p><strong>3) 云监控功能概览</strong></p><blockquote><p>云监控（CloudMonitor）：一项针对阿里云资源和互联网应用进行监控的服务。</p><p>可用于收集获取阿里云资源的监控指标，探测互联网服务可用性，以及针对指标设置警报。<br>能够监控云服务器ECS、云数据库RDS和负载均衡等各种阿里云服务资源<br>同时也能够通过HTTPICMP等通用网络协议监控互联网应用的可用性。</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020062519364172.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tpbmdfcHJvamVjdA==,size_16,color_FFFFFF,t_70" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> 综合学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACA </tag>
            
            <tag> SLB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于ECS和NAS搭建个人网盘</title>
      <link href="/article/51b20db3.html"/>
      <url>/article/51b20db3.html</url>
      
        <content type="html"><![CDATA[<h4 id="一、连接ECS服务器"><a href="#一、连接ECS服务器" class="headerlink" title="一、连接ECS服务器"></a>一、连接ECS服务器</h4><h4 id="二、安装-OwnCloud"><a href="#二、安装-OwnCloud" class="headerlink" title="二、安装 OwnCloud"></a>二、安装 OwnCloud</h4><p>OwnCloud是一款开源的云存储软件，基于PHP的自建网盘。基本上是私人使用，没有用户注册功能，但是有用户添加功能，你可以无限制地添加用户，OwnCloud支持多个平台（windows，MAC，Android，IOS，Linux）。</p><p>1.执行以下命令，添加一个新的软件源。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm --import https:&#x2F;&#x2F;download.owncloud.org&#x2F;download&#x2F;repositories&#x2F;10.0&#x2F;CentOS_7&#x2F;repodata&#x2F;repomd.xml.key</span><br><span class="line"></span><br><span class="line">wget http:&#x2F;&#x2F;download.owncloud.org&#x2F;download&#x2F;repositories&#x2F;10.0&#x2F;CentOS_7&#x2F;ce:10.0.repo -O &#x2F;etc&#x2F;yum.repos.d&#x2F;ce:10.0.repo</span><br></pre></td></tr></table></figure><p>2.执行以下命令安装OwnCloud-files。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install owncloud-files</span><br></pre></td></tr></table></figure><p>3.执行以下命令查看安装是否成功。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ll &#x2F;var&#x2F;www&#x2F;html</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://img.alicdn.com/tfs/TB15MD6HxD1gK0jSZFyXXciOVXa-629-78.png" alt="img"></p><h4 id="三、安装-Apache-服务"><a href="#三、安装-Apache-服务" class="headerlink" title="三、安装 Apache 服务"></a>三、安装 Apache 服务</h4><p>1.执行以下命令安装Apache服务。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install httpd –y</span><br></pre></td></tr></table></figure><p>2.执行以下命令启动Apache服务。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start httpd.service</span><br></pre></td></tr></table></figure><p>3.打开浏览器输入体验平台创建的ECS的弹性公网IP。如果出现如下图内容表示Apache安装成功。</p><p><img src= "/img/loading.gif" data-lazy-src="https://img.alicdn.com/tfs/TB1vopec5cKOu4jSZKbXXc19XXa-1652-418.png" alt="img"></p><p>4.添加OwnCloud配置：</p><p>1）执行以下命令打开Apache配置文件。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf</span><br></pre></td></tr></table></figure><p>2）按<code>i</code>键进入文件编辑模式，然后在<Directory>内容后添加以下内容。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># owncloud config</span><br><span class="line">Alias &#x2F;owncloud &quot;&#x2F;var&#x2F;www&#x2F;html&#x2F;owncloud&#x2F;&quot;</span><br><span class="line">&lt;Directory &#x2F;var&#x2F;www&#x2F;html&#x2F;owncloud&#x2F;&gt;</span><br><span class="line">    Options +FollowSymlinks</span><br><span class="line">    AllowOverride All</span><br><span class="line">    &lt;IfModule mod_dav.c&gt;</span><br><span class="line">        Dav off</span><br><span class="line">    &lt;&#x2F;IfModule&gt;</span><br><span class="line">    SetEnv HOME &#x2F;var&#x2F;www&#x2F;html&#x2F;owncloud</span><br><span class="line">    SetEnv HTTP_HOME &#x2F;var&#x2F;www&#x2F;html&#x2F;owncloud</span><br><span class="line">&lt;&#x2F;Directory&gt;</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://img.alicdn.com/tfs/TB1aLD3Hrr1gK0jSZR0XXbP8XXa-1136-814.png" alt="img"></p><p>3）按<code>esc</code>键退出编辑模式，然后输入<code>:wq</code>保存并退出配置文件。</p><h4 id="四、安装并配置PHP"><a href="#四、安装并配置PHP" class="headerlink" title="四、安装并配置PHP"></a>四、安装并配置PHP</h4><p>1.执行以下命令手动更新rpm源。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh https:&#x2F;&#x2F;dl.fedoraproject.org&#x2F;pub&#x2F;epel&#x2F;epel-release-latest-7.noarch.rpm   </span><br><span class="line">rpm -Uvh https:&#x2F;&#x2F;mirror.webtatic.com&#x2F;yum&#x2F;el7&#x2F;webtatic-release.rpm   </span><br></pre></td></tr></table></figure><p>2.执行以下命令安装PHP 7.2版本。</p><p>说明：OwnCloud只支持PHP 5.6+。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install php72w</span><br><span class="line">yum -y install php72w-cli php72w-common php72w-devel php72w-mysql php72w-xml php72w-odbc php72w-gd php72w-intl php72w-mbstring</span><br></pre></td></tr></table></figure><p>3.执行以下命令检测PHP是否安装成功。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -v</span><br></pre></td></tr></table></figure><p>4.将PHP配置到Apache中：</p><p>1）执行以下命令，找到php.ini文件目录。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find &#x2F; -name php.ini</span><br></pre></td></tr></table></figure><p>2）执行以下命令打开httpd.conf文件。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf</span><br></pre></td></tr></table></figure><p>3）按<code>i</code>键进入文件编辑模式，然后在文件最后添加以下内容。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PHPIniDir &#x2F;etc&#x2F;php.ini</span><br></pre></td></tr></table></figure><p>4）按<code>esc</code>键退出编辑模式，然后输入<code>:wq</code>保存并退出配置文件。</p><p>5）执行以下命令，重启Apache服务。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart httpd.service</span><br></pre></td></tr></table></figure><h4 id="五、配置OwnCloud"><a href="#五、配置OwnCloud" class="headerlink" title="五、配置OwnCloud"></a>五、配置OwnCloud</h4><p>完成上述配置后，就可以登录OwnCloud创建个人网盘了。</p><p>1.打开浏览器，输入<code>ECS弹性IP/owncloud</code>，例如<code>1.1.1.1/owncloud</code>。</p><p>2.创建管理员账号和密码，然后单击【存储&amp;数据库】，配置数据库，最后单击【安装完成】。</p><p>  <img src= "/img/loading.gif" data-lazy-src="https://img.alicdn.com/tfs/TB1hJYNzUT1gK0jSZFrXXcNCXXa-565-852.jpg" alt="img"></p><p>3.输入已创建的用户名和密码登录Owncloud。</p><p><img src= "/img/loading.gif" data-lazy-src="https://img.alicdn.com/tfs/TB11XYhxHr1gK0jSZR0XXbP8XXa-1005-477.png" alt="img"></p><p>登录成功界面如下：</p><p><img src= "/img/loading.gif" data-lazy-src="https://img.alicdn.com/tfs/TB117rPzQY2gK0jSZFgXXc5OFXa-1896-622.jpg" alt="img"></p><h4 id="六、挂载NAS服务"><a href="#六、挂载NAS服务" class="headerlink" title="六、挂载NAS服务"></a>六、挂载NAS服务</h4><p>完成OwnCloud初始化之后就可以将NAS存储包挂载到网盘服务器上。</p><p>1.登录阿里云控制台。在产品列表页，搜索NAS，然后单击【文件存储NAS】。</p><p><img src= "/img/loading.gif" data-lazy-src="https://img.alicdn.com/tfs/TB1IhzZHqL7gK0jSZFBXXXZZpXa-617-313.png" alt="img"></p><p>2.点击左侧【文件系统列表】，创建文件系统，创建完成后单击【文件系统 ID】进入文件系统详情页。</p><p><img src= "/img/loading.gif" data-lazy-src="https://img.alicdn.com/tfs/TB1MN_1Hvb2gK0jSZK9XXaEgFXa-1168-280.png" alt="img"></p><p>3.选择【挂载使用】，然后单击【添加挂载点】选择专有网络，最后单击【确定】。</p><p><img src= "/img/loading.gif" data-lazy-src="https://img.alicdn.com/tfs/TB1IZrLzND1gK0jSZFyXXciOVXa-1664-682.jpg" alt="img"></p><p>4.在命令行终端，执行以下命令安装NFS客户端。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nfs-utils</span><br></pre></td></tr></table></figure><p>5.在控制台，单击【挂载文件系统到ECS】查看挂载命令。</p><p><img src= "/img/loading.gif" data-lazy-src="https://img.alicdn.com/tfs/TB1Ev29Hrj1gK0jSZFuXXcrHpXa-1077-612.png" alt="img"></p><p>6.在打开的挂载文件系统到ECS页面复制挂载命令。</p><p><img src= "/img/loading.gif" data-lazy-src="https://img.alicdn.com/tfs/TB19HL7HAT2gK0jSZPcXXcKkpXa-562-203.png" alt="img"></p><p>7.将复制好的挂载命令粘贴到记事本中，然后把命令最后的<code>/mnt</code>替换为：<code>/var/www/html/owncloud/data/&lt;OwnCloud登录名&gt;</code>。</p><p>例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t nfs -o vers&#x3D;3,nolock,proto&#x3D;tcp,rsize&#x3D;1048576,wsize&#x3D;1048576,hard,timeo&#x3D;600,retrans&#x3D;2,noresvport 3ad894afd4-uon67.cn-shanghai.nas.aliyuncs.com:&#x2F; &#x2F;var&#x2F;www&#x2F;html&#x2F;owncloud&#x2F;data&#x2F;admin</span><br></pre></td></tr></table></figure><p>9.在命令窗口执行上一步骤的挂载命令。</p><p><img src= "/img/loading.gif" data-lazy-src="https://img.alicdn.com/tfs/TB1gyH1HpY7gK0jSZKzXXaikpXa-1116-142.png" alt="img"></p><p>10.执行以下命令查看挂载是否成功。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -h | grep aliyun</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://img.alicdn.com/tfs/TB1Dopec5cKOu4jSZKbXXc19XXa-1138-138.png" alt="img"></p><p>注意：NAS挂载成功后，OwnCloud网盘中的默认目录和文件不可读写，请在网盘中新建目录上传。</p>]]></content>
      
      
      <categories>
          
          <category> 综合学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ECS </tag>
            
            <tag> NAS </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
